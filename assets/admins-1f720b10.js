import{g as e,p as l,_ as a}from"./index-30b3d731.js";import{E as o}from"./element-ca729cb6.js";import{v as d,r,l as s,ak as u,aq as t,y as i,B as n,E as m,C as p,D as v,M as f,J as c,z as b}from"./vendor-60cd9ffe.js";const g={class:"admin-page"},w={class:"toolbar"},_={class:"toolbar-left"},V={class:"toolbar-right"},h=a(d({__name:"admins",setup(a){const d=r(!1),h=r([]),y=r({visible:!1,loading:!1,form:{username:"",password:"",nickname:"",role:""}}),k=async()=>{d.value=!0;try{const l=await e("/settings/admins");h.value=l.list}catch(l){o.error("获取管理员列表失败")}finally{d.value=!1}},C=()=>{y.value.visible=!0,y.value.form={username:"",password:"",nickname:"",role:""}},U=async()=>{if(y.value.form.username&&y.value.form.password){y.value.loading=!0;try{await(e=y.value.form,l("/settings/admins",e)),o.success("创建成功"),y.value.visible=!1,k()}catch(a){o.error("创建失败")}finally{y.value.loading=!1}var e}else o.warning("请输入用户名和密码")};return s(()=>{k()}),(e,l)=>{const a=u("el-button"),o=u("el-table-column"),r=u("el-table"),s=u("el-input"),x=u("el-form-item"),j=u("el-form"),D=u("el-dialog"),E=t("loading");return i(),n("div",g,[m("div",w,[m("div",_,[p(a,{type:"primary",onClick:C},{default:v(()=>[...l[6]||(l[6]=[f("新增管理员",-1)])]),_:1})]),m("div",V,[p(a,{onClick:k,loading:d.value},{default:v(()=>[...l[7]||(l[7]=[f("刷新",-1)])]),_:1},8,["loading"])])]),c((i(),b(r,{data:h.value,stripe:""},{default:v(()=>[p(o,{prop:"id",label:"ID",width:"120"}),p(o,{prop:"username",label:"用户名",width:"160"}),p(o,{prop:"nickname",label:"昵称",width:"160"}),p(o,{prop:"role",label:"角色",width:"120"}),p(o,{prop:"createdAt",label:"创建时间","min-width":"180"})]),_:1},8,["data"])),[[E,d.value]]),p(D,{modelValue:y.value.visible,"onUpdate:modelValue":l[5]||(l[5]=e=>y.value.visible=e),title:"新增管理员",width:"420px"},{footer:v(()=>[p(a,{onClick:l[4]||(l[4]=e=>y.value.visible=!1)},{default:v(()=>[...l[8]||(l[8]=[f("取消",-1)])]),_:1}),p(a,{type:"primary",loading:y.value.loading,onClick:U},{default:v(()=>[...l[9]||(l[9]=[f(" 创建 ",-1)])]),_:1},8,["loading"])]),default:v(()=>[p(j,{model:y.value.form,"label-width":"90px"},{default:v(()=>[p(x,{label:"用户名"},{default:v(()=>[p(s,{modelValue:y.value.form.username,"onUpdate:modelValue":l[0]||(l[0]=e=>y.value.form.username=e),placeholder:"输入用户名"},null,8,["modelValue"])]),_:1}),p(x,{label:"密码"},{default:v(()=>[p(s,{modelValue:y.value.form.password,"onUpdate:modelValue":l[1]||(l[1]=e=>y.value.form.password=e),type:"password",placeholder:"输入密码"},null,8,["modelValue"])]),_:1}),p(x,{label:"昵称"},{default:v(()=>[p(s,{modelValue:y.value.form.nickname,"onUpdate:modelValue":l[2]||(l[2]=e=>y.value.form.nickname=e),placeholder:"可选"},null,8,["modelValue"])]),_:1}),p(x,{label:"角色"},{default:v(()=>[p(s,{modelValue:y.value.form.role,"onUpdate:modelValue":l[3]||(l[3]=e=>y.value.form.role=e),placeholder:"例如：admin"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-9ec2581c"]]);export{h as default};
